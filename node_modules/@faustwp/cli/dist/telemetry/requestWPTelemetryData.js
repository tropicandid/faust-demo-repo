import 'isomorphic-fetch';
const WP_TELEMETRY_ENDPOINT = '/wp-json/faustwp/v1/telemetry';
/**
 * Request the telemetry data from WordPress.
 *
 * @param headlessWpUrl The headless WordPress URL
 * @param headlessSecretKey The headless WordPress secret key for authorizing the request.
 * @returns WPTelemetryResponseData
 */
export const requestWPTelemetryData = async (headlessWpUrl, headlessSecretKey) => {
    const res = await fetch(`${headlessWpUrl}${WP_TELEMETRY_ENDPOINT}`, {
        method: 'POST',
        headers: {
            'x-faustwp-secret': headlessSecretKey,
        },
    });
    // If the response is invalid, return undefined for appropriate error handling.
    if (res.status !== 200) {
        return undefined;
    }
    const json = (await res.json());
    return json;
};
