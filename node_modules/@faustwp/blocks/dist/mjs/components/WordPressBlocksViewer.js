import React from 'react';
import resolveBlockTemplate from '../resolveBlockTemplate.js';
import { WordPressBlocksContext } from './WordPressBlocksProvider.js';
/**
 * WordPressBlocksViewer is the main component that renders blocks taken from WordPress as a list of ContentBlock[] data.
 * @param props WordpressBlocksViewerProps
 * @returns JSX.Component that renders the block tree.
 */
export function WordPressBlocksViewer(props) {
    const blocks = React.useContext(WordPressBlocksContext);
    if (!blocks) {
        throw new Error('Blocks are required. Please add them to your config.');
    }
    const { blocks: editorBlocks, fallbackBlock } = props;
    if (!editorBlocks) {
        throw new Error('The "blocks" prop is required in <WordPressBlocksViewer>');
    }
    const renderedBlocks = editorBlocks.map((blockProps, idx) => {
        const BlockTemplate = resolveBlockTemplate(blockProps, blocks, fallbackBlock);
        return React.createElement(BlockTemplate, Object.assign(Object.assign({}, blockProps), { 
            // eslint-disable-next-line react/no-array-index-key
            key: idx }));
    });
    // eslint-disable-next-line react/jsx-no-useless-fragment
    return React.createElement(React.Fragment, null, renderedBlocks);
}
