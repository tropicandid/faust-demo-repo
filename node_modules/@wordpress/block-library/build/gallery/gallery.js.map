{"version":3,"sources":["@wordpress/block-library/src/gallery/gallery.js"],"names":["allowedBlocks","Gallery","props","attributes","isSelected","setAttributes","mediaPlaceholder","insertBlocksAfter","blockProps","__unstableLayoutClassNames","layoutClassNames","align","columns","caption","imageCrop","children","innerBlocksProps","orientation","renderAppender","__experimentalLayout","type","alignments","className","undefined","RichText","isEmpty","value","RichTextVisibilityHelper","isHidden","placeholder","tagName","captionRef","richTextProps"],"mappings":";;;;;;;;;;;;;AAGA;;AAKA;;AAKA;;AACA;;AACA;;AACA;;AAhBA;AACA;AACA;;AAGA;AACA;AACA;AAWA,MAAMA,aAAa,GAAG,CAAE,YAAF,CAAtB;;AAEO,MAAMC,OAAO,GAAKC,KAAF,IAAa;AACnC,QAAM;AACLC,IAAAA,UADK;AAELC,IAAAA,UAFK;AAGLC,IAAAA,aAHK;AAILC,IAAAA,gBAJK;AAKLC,IAAAA,iBALK;AAMLC,IAAAA,UANK;AAOLC,IAAAA,0BAA0B,EAAEC;AAPvB,MAQFR,KARJ;AAUA,QAAM;AAAES,IAAAA,KAAF;AAASC,IAAAA,OAAT;AAAkBC,IAAAA,OAAlB;AAA2BC,IAAAA;AAA3B,MAAyCX,UAA/C;AAEA,QAAM;AAAEY,IAAAA,QAAF;AAAY,OAAGC;AAAf,MAAoC,sCAAqBR,UAArB,EAAiC;AAC1ER,IAAAA,aAD0E;AAE1EiB,IAAAA,WAAW,EAAE,YAF6D;AAG1EC,IAAAA,cAAc,EAAE,KAH0D;AAI1EC,IAAAA,oBAAoB,EAAE;AAAEC,MAAAA,IAAI,EAAE,SAAR;AAAmBC,MAAAA,UAAU,EAAE;AAA/B;AAJoD,GAAjC,CAA1C;AAOA,SACC,iEACML,gBADN;AAEC,IAAA,SAAS,EAAG,yBACXR,UAAU,CAACc,SADA,EAEXZ,gBAFW,EAGX,qBAHW,EAIX;AACC,OAAG,QAAQC,KAAO,EAAlB,GAAuBA,KADxB;AAEC,OAAG,WAAWC,OAAS,EAAvB,GAA4BA,OAAO,KAAKW,SAFzC;AAGC,OAAG,iBAAH,GAAuBX,OAAO,KAAKW,SAHpC;AAIC,oBAAcT;AAJf,KAJW;AAFb,MAcGC,QAdH,EAeGX,UAAU,IAAI,CAAEW,QAAhB,IACD,4BAAC,gBAAD;AAAM,IAAA,SAAS,EAAC;AAAhB,KACGT,gBADH,CAhBF,EAoBC,4BAAC,wBAAD;AACC,IAAA,QAAQ,EAAG,CAAEF,UAAF,IAAgBoB,sBAASC,OAAT,CAAkBZ,OAAlB,CAD5B;AAEC,IAAA,OAAO,EAAC,YAFT;AAGC,IAAA,SAAS,EAAG,yBACX,wBADW,EAEX,oDAAmC,SAAnC,CAFW,CAHb;AAOC,kBAAa,cAAI,sBAAJ,CAPd;AAQC,IAAA,WAAW,EAAG,cAAI,wBAAJ,CARf;AASC,IAAA,KAAK,EAAGA,OATT;AAUC,IAAA,QAAQ,EAAKa,KAAF,IAAarB,aAAa,CAAE;AAAEQ,MAAAA,OAAO,EAAEa;AAAX,KAAF,CAVtC;AAWC,IAAA,aAAa,MAXd;AAYC,IAAA,sBAAsB,EAAG,MACxBnB,iBAAiB,CAAE,yBAAa,kCAAb,CAAF;AAbnB,IApBD,CADD;AAuCA,CA3DM;;;;AA6DP,SAASoB,wBAAT,OAQI;AAAA,MAR+B;AAClCC,IAAAA,QADkC;AAElCN,IAAAA,SAFkC;AAGlCI,IAAAA,KAHkC;AAIlCG,IAAAA,WAJkC;AAKlCC,IAAAA,OALkC;AAMlCC,IAAAA,UANkC;AAOlC,OAAGC;AAP+B,GAQ/B;;AACH,MAAKJ,QAAL,EAAgB;AACf,WAAO,4BAAC,0BAAD;AAAgB,MAAA,EAAE,EAAGJ;AAArB,OAAqCQ,aAArC,EAAP;AACA;;AAED,SACC,4BAAC,qBAAD;AACC,IAAA,GAAG,EAAGD,UADP;AAEC,IAAA,KAAK,EAAGL,KAFT;AAGC,IAAA,WAAW,EAAGG,WAHf;AAIC,IAAA,SAAS,EAAGP,SAJb;AAKC,IAAA,OAAO,EAAGQ;AALX,KAMME,aANN,EADD;AAUA;;eAEc/B,O","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRichText,\n\tuseInnerBlocksProps,\n\t__experimentalGetElementClassName,\n} from '@wordpress/block-editor';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\nimport { View } from '@wordpress/primitives';\n\nconst allowedBlocks = [ 'core/image' ];\n\nexport const Gallery = ( props ) => {\n\tconst {\n\t\tattributes,\n\t\tisSelected,\n\t\tsetAttributes,\n\t\tmediaPlaceholder,\n\t\tinsertBlocksAfter,\n\t\tblockProps,\n\t\t__unstableLayoutClassNames: layoutClassNames,\n\t} = props;\n\n\tconst { align, columns, caption, imageCrop } = attributes;\n\n\tconst { children, ...innerBlocksProps } = useInnerBlocksProps( blockProps, {\n\t\tallowedBlocks,\n\t\torientation: 'horizontal',\n\t\trenderAppender: false,\n\t\t__experimentalLayout: { type: 'default', alignments: [] },\n\t} );\n\n\treturn (\n\t\t<figure\n\t\t\t{ ...innerBlocksProps }\n\t\t\tclassName={ classnames(\n\t\t\t\tblockProps.className,\n\t\t\t\tlayoutClassNames,\n\t\t\t\t'blocks-gallery-grid',\n\t\t\t\t{\n\t\t\t\t\t[ `align${ align }` ]: align,\n\t\t\t\t\t[ `columns-${ columns }` ]: columns !== undefined,\n\t\t\t\t\t[ `columns-default` ]: columns === undefined,\n\t\t\t\t\t'is-cropped': imageCrop,\n\t\t\t\t}\n\t\t\t) }\n\t\t>\n\t\t\t{ children }\n\t\t\t{ isSelected && ! children && (\n\t\t\t\t<View className=\"blocks-gallery-media-placeholder-wrapper\">\n\t\t\t\t\t{ mediaPlaceholder }\n\t\t\t\t</View>\n\t\t\t) }\n\t\t\t<RichTextVisibilityHelper\n\t\t\t\tisHidden={ ! isSelected && RichText.isEmpty( caption ) }\n\t\t\t\ttagName=\"figcaption\"\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'blocks-gallery-caption',\n\t\t\t\t\t__experimentalGetElementClassName( 'caption' )\n\t\t\t\t) }\n\t\t\t\taria-label={ __( 'Gallery caption text' ) }\n\t\t\t\tplaceholder={ __( 'Write gallery captionâ€¦' ) }\n\t\t\t\tvalue={ caption }\n\t\t\t\tonChange={ ( value ) => setAttributes( { caption: value } ) }\n\t\t\t\tinlineToolbar\n\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\tinsertBlocksAfter( createBlock( getDefaultBlockName() ) )\n\t\t\t\t}\n\t\t\t/>\n\t\t</figure>\n\t);\n};\n\nfunction RichTextVisibilityHelper( {\n\tisHidden,\n\tclassName,\n\tvalue,\n\tplaceholder,\n\ttagName,\n\tcaptionRef,\n\t...richTextProps\n} ) {\n\tif ( isHidden ) {\n\t\treturn <VisuallyHidden as={ RichText } { ...richTextProps } />;\n\t}\n\n\treturn (\n\t\t<RichText\n\t\t\tref={ captionRef }\n\t\t\tvalue={ value }\n\t\t\tplaceholder={ placeholder }\n\t\t\tclassName={ className }\n\t\t\ttagName={ tagName }\n\t\t\t{ ...richTextProps }\n\t\t/>\n\t);\n}\n\nexport default Gallery;\n"]}